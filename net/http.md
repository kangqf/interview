## HTTP 

http/1.0 1996年5月

http/1.1 1997年1月

http/2.0 2015年5月

### http/1.1 与 http/1.0
http/1.1 新增了 TRACE CONNECT OPTION 三个方法 删除了 LINK UNLINE 两个方法

http/1.1 默认使用 keep-alive

http/1.1 引入更多缓存头控制缓存策略

http/1.1 带宽优化及网络连接的使用，增加断点续传功能

http/1.1 错误通知的管理：新增24个错误状态码，如409（conflict）表示请求资源与资源当前状态冲突、410（Gone）表示服务器上某个资源被永久性删除。

http/1.1 Host头处理。随着虚拟主机技术的发展，一台物理服务器上可以存在多个虚拟主机且共享同一个IP。HTTP 1.1请求和响应都支持host头，请求消息中如果缺少host，会报400（Bad Request）


### http/2.0 与 http/1.1
http/2.0 使用了头部压缩 hpack

http/2.0 使用流进行传输而不是纯文本

http/2.0 开启了多路复用

### quic 相比于 http/2.0 
QUIC主要目标是减少连接延迟，客户端第一次连接服务器时，QUIC只需要1RTT的延迟就可以建立可靠安全的连接，相对于TCP+TLS的1～3次RTT要更加快捷。之后客户端可以在本地缓存加密的认证信息，再次与服务端建立连接时可以实现0RTT的连接建立延迟。

QUIC同时复用了HTTP2.0的多路复用（Multiplexing）功能，但由于QUIC基于UDP，避免了HTTP/2的Head-of-Line Bolcking问题。

0RTT握手过程。QUIC握手过程需要一次数据交互，0RTT即可以完成握手过程的密钥协商，比TLS相比效率提供了5倍


### http 代理服务器的作用
缓存  访问控制 日志

### 一个页面的加载流程
从输入地址到页面在浏览器渲染出来，期间都发生了什么？

从输入地址，用户按下回车键开始，

用户请求 域名对应的 IP 地址 用到 DNS

在查找 DNS 服务器 的物理地址时用到 ARP 发现无响应，则把数据包丢到路由器

路由器将数据包经过各种协议到达 DNS 服务器 ，服务器对请求的域名进行迭代查询，或递归查询，直到解析出地址，返回给浏览器。

浏览器通过IP地址与对应的服务器先进行三次握手建立连接，然后再可能进行SSL握手建立隧道

浏览器将数据分块通过TCP控制发送速度（滑动窗口，拥塞避免）发送到服务器。

服务器判断客户端的请求，并做出响应，可能时 304 表征使用缓存，也可能是200 表征正常然后返回所有内容。

浏览器对收到的数据进行 html 的解析然后再页面上面渲染出网页。


### 断点续传的实现原理：范围请求（Range Request）
请求使用 range 头部进行局部范围请求，例如`Range: bytes=5001-10000`

而响应使用 206 partial content 作为响应，并且利用 `Content-Range` 来标识当前的数据是哪部分数据内容，同时使用首部字段 `Content-Type` 标明 `multipart/byteranges` 表征这是部分数据

分块传输编码会将实体主体分成多个部分（块）。每一块都会用十六进制来标记块的大小，而实体主体的最后一块会使用“0(CR+LF)”来标记。











